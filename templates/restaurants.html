{% extends 'base.html'%}
{% block content %}

    <h1>Create Your Event</h1>

    <h3>2) Choose a place, date, and time:</h3>

    <form action="/confirmation", method="POST">
        <div>
            <label>
                    {% for business in businesses%}
                        <input type="radio" name="business_url" value="{{business.url}}" required><a href="{{business.url}}">{{business.name}}</a> -  Ratings: {{business.rating}}  || Reviews: {{business.review_count}}  ||  {{', '.join(business.location.display_address)}}<br>
                        {# <input type="hidden" name ="business_name" value="{{business.name}}">
                        <input type="hidden" name ="business_rating" value="{{business.rating}}">
                        <input type="hidden" name ="business_location" value="{{', '.join(business.location.display_address)}}">
                        <input type="hidden" name ="business_review_count" value="{{business.review_count}}"> #}
                    {% endfor %}
            </label>
        </div>
        <div>
            <h6>*Don't forget to check business hours before hand!</h6>
            <label>Date:
                <input type="text" name="date" id="date" required>
            </label>
        </div>
        <br>
        <div>
            <label>Start Time:
                <select name="start_time"> 
                {% for time in times %}
                    <option value={{ time }}>{{ time }}</option>
                {% endfor %}
                </select>
            </label>
            <label>End Time:
                <select name="end_time"> 
                {% for time in times %}
                    <option value={{ time }}>{{ time }}</option>
                {% endfor %}
                </select>
            </label>
        </div>
        <br>
        <div>
            <input type="hidden" name ="category_id" value="{{category_id}}">
            <input type="submit" value="Create my event!">
        </div>
    </form>
    <div id="map" style="width:200px;height:300px"></div> 

    <script src="https://maps.googleapis.com/maps/api/js?key={{GOOGLE_KEY}}&callback=initMap"
    async defer></script>

    <script>
        // var map;
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
            // zoom: 4,
            // center: myLatLng
        });

        // var results = [
        //     {{businesses}}
        // ]

        var results = [
        {name: '1', lat: -25, lng: 131},
        {name: '2', lat: -25.01, lng: 131.01},
        {name: '3', lat: -25.02, lng: 131.02},
        {name: '4', lat: -25.03, lng: 131.03},
        ]

        var bounds = new google.maps.LatLngBounds();
            for(var i = 0; i < results.length; i++) {
                var marker = new google.maps.Marker({
                    // position: {lat: results[i].location.coordinate.latitude, lng: results[i].location.coordinate.longitude},
                    position: {lat: results[i].lat, lng: results[i].lng},
                    map: map,
                    title: results[i].name
                  });
                bounds.extend(marker.getPosition());
            }

        map.fitBounds(bounds);

      }
    </script>

    <script>
    $( function() {
      $( "#date" ).datepicker({minDate: 1});
    } );
    </script>


{% endblock %}